{% extends "vehiculos/layout_contratos.html" %}

{% block title %}
    Seleccionar Usuarios, Veh√≠culos y Tipo de Contrato
{% endblock %}

{% block content %}
<style>
    .card {
        border: none;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        margin-bottom: 20px;
    }
    .card-header {
        background: linear-gradient(135deg, #e4af00ff 0%, #f0c040 100%);
        color: white;
        font-weight: 600;
        border-radius: 10px 10px 0 0 !important;
        padding: 15px 20px;
    }
    .nav-tabs {
        border-bottom: 2px solid #e4af00ff;
    }
    .nav-tabs .nav-link {
        color: #666;
        border: none;
        padding: 12px 25px;
        font-weight: 500;
        transition: all 0.3s;
    }
    .nav-tabs .nav-link:hover {
        color: #e4af00ff;
        border: none;
    }
    .nav-tabs .nav-link.active {
        color: #e4af00ff;
        background: white;
        border: none;
        border-bottom: 3px solid #e4af00ff;
        font-weight: 600;
    }
    .form-label {
        font-weight: 500;
        color: #333;
        margin-bottom: 8px;
    }
    .form-control, .form-select {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 10px 15px;
        transition: all 0.3s;
    }
    .form-control:focus, .form-select:focus {
        border-color: #e4af00ff;
        box-shadow: 0 0 0 0.2rem rgba(228, 175, 0, 0.15);
    }
    .btn-primary {
        background: #e4af00ff;
        border: none;
        padding: 12px 30px;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s;
    }
    .btn-primary:hover {
        background: #c99900;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(228, 175, 0, 0.3);
    }
    .btn-secondary {
        background: #6c757d;
        border: none;
        padding: 10px 25px;
        border-radius: 8px;
        font-weight: 500;
        margin-right: 10px;
    }
    .clausula-item {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 10px;
        border-left: 3px solid #e4af00ff;
    }
    .clausula-item input[type="checkbox"] {
        width: 18px;
        height: 18px;
        margin-right: 10px;
        cursor: pointer;
    }
    .clausula-item input[type="text"] {
        width: 100%;
        margin-top: 8px;
    }
    .info-box {
        background: #e8f4f8;
        border-left: 4px solid #17a2b8;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        font-family: monospace;
        font-size: 13px;
        user-select: text;
    }
    .section-divider {
        border-top: 2px solid #e4af00ff;
        margin: 30px 0;
        opacity: 0.3;
    }
</style>

<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="mb-3">üìÑ Generador de Contratos</h2>
            <p class="text-muted">Complete la informaci√≥n necesaria para generar el contrato en formato PDF</p>
        </div>
    </div>

    <form action="{% url 'vehiculos:generar_pdf' %}" method="get" target="_blank">
        
        <!-- TABS DE NAVEGACI√ìN -->
        <ul class="nav nav-tabs mb-4" id="contratoTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="personas-tab" data-bs-toggle="tab" data-bs-target="#personas" type="button" role="tab">
                    üë• Personas
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="vehiculos-tab" data-bs-toggle="tab" data-bs-target="#vehiculos" type="button" role="tab">
                    üöó Veh√≠culos
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="contrato-tab" data-bs-toggle="tab" data-bs-target="#contrato" type="button" role="tab">
                    üìã Tipo de Contrato
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pagos-tab" data-bs-toggle="tab" data-bs-target="#pagos" type="button" role="tab">
                    üí∞ Pagos
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="clausulas-tab" data-bs-toggle="tab" data-bs-target="#clausulas" type="button" role="tab">
                    üìù Cl√°usulas
                </button>
            </li>
        </ul>

        <!-- CONTENIDO DE TABS -->
        <div class="tab-content" id="contratoTabsContent">
            
            <!-- TAB 1: PERSONAS -->
            <div class="tab-pane fade show active" id="personas" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        Informaci√≥n de Personas
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="persona" class="form-label">Tipo de Persona</label>
                                <select name="persona" id="persona" class="form-select">
                                    <option value="">Seleccione el tipo de persona</option>
                                    <option value="Natural">Natural</option>
                                    <option value="Juridica">Jur√≠dica</option>
                                </select>
                            </div>

                            <!-- Persona Natural -->
                            <div class="col-md-6 mb-3" id="vendedores_section">
                                <label for="vendedores" class="form-label">N√∫mero de Vendedores</label>
                                <select name="vendedores" id="vendedores" class="form-select">
                                    <option value="">Seleccione</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                </select>
                            </div>

                            <div class="col-md-6 mb-3" id="compradores_section">
                                <label for="compradores" class="form-label">N√∫mero de Compradores</label>
                                <select name="compradores" id="compradores" class="form-select">
                                    <option value="">Seleccione</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                </select>
                            </div>

                            <!-- Persona Jur√≠dica -->
                            <div class="col-md-6 mb-3" id="tipo_persona_juridica" style="display: none;">
                                <label for="tipo_juridica" class="form-label">Tipo de Persona Jur√≠dica</label>
                                <select name="tipo_juridica" id="tipo_juridica" class="form-select">
                                    <option value="">Seleccione</option>
                                    <option value="Comprador">Comprador</option>
                                    <option value="Vendedor">Vendedor</option>
                                </select>
                            </div>
                        </div>

                        <!-- Campos Jur√≠dica -->
                        <div id="campos_juridica" style="display: none;">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="nit" class="form-label">NIT</label>
                                    <input type="text" name="nit" id="nit" class="form-control" placeholder="Ingrese el NIT">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="nombre" class="form-label">Nombre</label>
                                    <input type="text" name="nombre" id="nombre" class="form-control" placeholder="Ingrese el Nombre">
                                </div>
                            </div>
                        </div>

                        <div class="section-divider"></div>

                        <!-- C√©dulas -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="usuario1" class="form-label">C√©dula del Vendedor</label>
                                <input type="text" name="usuario1_cedula" id="usuario1" class="form-control" placeholder="Ingrese la c√©dula del Vendedor">
                            </div>

                            <div class="col-md-6 mb-3" id="cedula_vendedor_2" style="display: none;">
                                <label for="vendedor_cedula_2" class="form-label">Segunda C√©dula del Vendedor</label>
                                <input type="text" name="vendedor_cedula_2" id="vendedor_cedula_2" class="form-control" placeholder="Ingrese la segunda c√©dula">
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="usuario2" class="form-label">C√©dula del Comprador</label>
                                <input type="text" name="usuario2_cedula" id="usuario2" class="form-control" placeholder="Ingrese la c√©dula del comprador">
                            </div>

                            <div class="col-md-6 mb-3" id="cedula_comprador_2" style="display: none;">
                                <label for="comprador_cedula_2" class="form-label">Segunda C√©dula del Comprador</label>
                                <input type="text" name="comprador_cedula_2" id="comprador_cedula_2" class="form-control" placeholder="Ingrese la segunda c√©dula">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="refiere" class="form-label">Refiere</label>
                                <input type="text" name="refiere" id="refiere" class="form-control" placeholder="Ingrese el Referido">
                            </div>

                            <div class="col-md-6 mb-3" id="reviso_lista">
                                <label for="revisado" class="form-label">Quien Revisa</label>
                                <select name="revisado" id="revisado" class="form-select">
                                    <option value="">Seleccione</option>
                                    <option value="Gerencia">Gerencia</option>
                                    <option value="Jefe Comercial">Jefe Comercial</option>
                                </select>
                            </div>

                            <div class="col-md-6 mb-3" id="asesor_lista">
                                <label for="asesors" class="form-label">Asesor</label>
                                <select name="asesors" id="asesors" class="form-select">
                                    <option value="">Seleccione</option>
                                    <option value="David Londo√±o">David Londo√±o</option>
                                    <option value="Wilson Bernal">Wilson Bernal</option>
                                    <option value="Elizabeth Sanchez">Elizabeth Sanchez</option>
                                    <option value="Juan Mahecha">Juan Mahecha</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 2: VEH√çCULOS -->
            <div class="tab-pane fade" id="vehiculos" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        Informaci√≥n de Veh√≠culos
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="vehiculo" class="form-label">Placa del Veh√≠culo</label>
                                <input type="text" name="vehiculo_placa" id="vehiculo" class="form-control" placeholder="Ingrese la placa del veh√≠culo">
                            </div>

                            <div class="col-md-6 mb-3" id="vehiculo2-container" style="display: none;">
                                <label for="vehiculo2" class="form-label">Placa del Segundo Veh√≠culo</label>
                                <input type="text" name="vehiculo2_placa" id="vehiculo2" class="form-control" placeholder="Ingrese la placa del segundo veh√≠culo">
                            </div>
                        </div>

                        <!-- Campos Permuta -->
                        <div id="campos_adicionales_permuta" style="display: none;">
                            <div class="section-divider"></div>
                            <h5 class="mb-3">Informaci√≥n de Permuta</h5>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="v_primer_vehiculo" class="form-label">Valor Primer Veh√≠culo</label>
                                    <input type="text" id="v_primer_vehiculo" name="v_primer_vehiculo" class="form-control" placeholder="Ingrese el valor 1">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="v_segundo_vehiculo" class="form-label">Valor Segundo Veh√≠culo</label>
                                    <input type="text" id="v_segundo_vehiculo" name="v_segundo_vehiculo" class="form-control" placeholder="Ingrese el valor 2">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="p_adicional" class="form-label">Pago Adicional</label>
                                    <input type="text" id="p_adicional" name="p_adicional" class="form-control" placeholder="Ingrese el pago adicional">
                                </div>
                            </div>
                        </div>

                        <!-- Servicio Chatarizaci√≥n -->
                        <div id="serv_chatarrizacion" style="display: none;">
                            <div class="section-divider"></div>
                            <h5 class="mb-3">Informaci√≥n de Chatarizaci√≥n</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="placaC" class="form-label">Placa a Chatarizar</label>
                                    <input type="text" name="placaC" id="placaC" class="form-control" placeholder="Ingrese la placa del veh√≠culo a chatarrizar">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="airbag" class="form-label">Airbag y Frenos A.B.S</label>
                                    <input type="text" name="airbag" id="airbag" class="form-control" placeholder="Especifique si tiene airbag">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="aire" class="form-label">Aire Acondicionado</label>
                                    <input type="text" name="aire" id="aire" class="form-control" placeholder="Especifique si tiene aire acondicionado">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="gas" class="form-label">Gas Motor</label>
                                    <input type="text" name="gas" id="gas" class="form-control" placeholder="Especifique si tiene gas">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 3: TIPO DE CONTRATO -->
            <div class="tab-pane fade" id="contrato" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        Tipo de Contrato
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="tipo_contrato" class="form-label">Seleccione el Tipo de Contrato</label>
                                <select name="tipo_contrato" id="tipo_contrato" class="form-select" required>
                                    <option value="">Selecciona el tipo de contrato</option>
                                    <option value="venta">Venta de Taxi con Cupo</option>
                                    <option value="Compra_Cupo">Compra Cupo</option>
                                    <option value="compra_Particular">Compra Particular</option>
                                    <option value="compra_usado">Compra Usado</option>
                                    <option value="permuta">Permuta</option>
                                    <option value="chatarizacion_con_venta">Chatarizaci√≥n con venta</option>
                                    <option value="servicio_chatarrizacion">Servicio Chatarizaci√≥n</option>
                                    <option value="venta_cupo">Venta Cupo</option>
                                    <option value="venta_particular">Venta Particular</option>
                                    <option value="venta_usado">Venta Usado</option>
                                    <option value="diaco">Diaco</option>
                                    <option value="compra_venta">Compra Venta</option>
                                    <option value="cmatricula">Cancelaci√≥n Matr√≠cula</option>
                                    <option value="mandato">Mandato</option>
                                    <option value="fun">Fun</option>
                                    <option value="metrokia">Credi MetroKia</option>
                                    <option value="autoland">Credi Autoland</option>
                                    <option value="soat">Soat</option>
                                </select>
                            </div>

                            <div class="col-md-6 mb-3" id="tipo_venta_usado-container" style="display: none;">
                                <label for="tipo_venta_usado" class="form-label">Tipo de Pago</label>
                                <select name="tipo_venta_usado" id="tipo_venta_usado" class="form-select">
                                    <option value="contado">Contado</option>
                                    <option value="doble_garantia">Doble Garantia</option>
                                    <option value="credito">Credito</option>
                                </select>
                            </div>

                            <div class="col-md-6 mb-3" id="venta_nuevo_container" style="display: none;">
                                <label for="venta_nuevo" class="form-label">Pago Cl√°usula 5ta</label>
                                <select name="venta_nuevo" id="venta_nuevo" class="form-select">
                                    <option value="primero">Primer Pago</option>
                                    <option value="segundo">Segundo Pago</option>
                                    <option value="tercero">Tercer Pago</option>
                                    <option value="primeroysegundo">Primer+Segundo Pago</option>
                                    <option value="totalP">Pago Total</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 4: PAGOS -->
            <div class="tab-pane fade" id="pagos" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        Informaci√≥n de Pagos
                    </div>
                    <div class="card-body">
                        <div id="compra_cupo_campos">
                            <div class="info-box mb-4">
                                <strong>Variables disponibles para usar en las cl√°usulas:</strong><br>
                                Para Primer pago usar: &#123;&#123;primer_pago|intcomma&#125;&#125;<br>
                                Para Primer pago en letras usar &#123;&#123;primer_pago_letras&#125;&#125;<br>
                                Para el dia del primer pago usar &#123;&#123;dia_primer_pago&#125;&#125;<br>
                                Para el dia del primer en letras pago usar &#123;&#123;dia_primer_pago_letras&#125;&#125;<br>
                                Para segundo pago usar: &#123;&#123;segundo_pago|intcomma&#125;&#125;<br>
                                Para segundo pago en letras usar &#123;&#123;segundo_pago_letras&#125;&#125;<br>
                                Para el dia del segundo pago usar &#123;&#123;dia_segundo_pago&#125;&#125;<br>
                                Para el dia del segundo en letras pago usar &#123;&#123;dia_segundo_pago_letras&#125;&#125;<br>
                                Para tercer pago usar: &#123;&#123;tercer_pago|intcomma&#125;&#125;<br>
                                Para tercer pago en letras usar &#123;&#123;tercer_pago_letras&#125;&#125;<br>
                                Para el dia del tercer pago usar &#123;&#123;dia_tercer_pago&#125;&#125;<br>
                                Para el dia del tercer en letras pago usar &#123;&#123;dia_tercer_pago_letras&#125;&#125;
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="pacta_suma" class="form-label">Se pacta la suma de</label>
                                    <input type="number" id="pacta_suma" name="pacta_suma" class="form-control" placeholder="Ingrese el monto pactado" value="0">
                                </div>
                            </div>

                            <div class="section-divider"></div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="primer_pago" class="form-label">Primer Pago</label>
                                    <input type="number" id="primer_pago" name="primer_pago" class="form-control" placeholder="Ingrese el primer pago" value="0">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="dia_primer_pago" class="form-label">Posterior a los (d√≠as)</label>
                                    <input type="number" id="dia_primer_pago" name="dia_primer_pago" class="form-control" placeholder="Ingrese el dia" value="0">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="segundo_pago" class="form-label">Segundo Pago</label>
                                    <input type="number" id="segundo_pago" name="segundo_pago" class="form-control" placeholder="Ingrese el segundo pago" value="0">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="dia_segundo_pago" class="form-label">Posterior a los (d√≠as)</label>
                                    <input type="number" id="dia_segundo_pago" name="dia_segundo_pago" class="form-control" placeholder="Ingrese el dia" value="0">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="tercer_pago" class="form-label">Tercer Pago</label>
                                    <input type="number" id="tercer_pago" name="tercer_pago" class="form-control" placeholder="Ingrese el tercer pago" value="0">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="dia_tercer_pago" class="form-label">Posterior a los (d√≠as)</label>
                                    <input type="number" id="dia_tercer_pago" name="dia_tercer_pago" class="form-control" placeholder="Ingrese el dia" value="0">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="cuarta_clausula" class="form-label">Cuarta Obligaciones (d√≠as posteriores a la firma)</label>
                                    <input type="number" id="cuarta_clausula" name="cuarta_clausula" class="form-control" placeholder="Posteriores a la firma" value="0">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 5: CL√ÅUSULAS -->
            <div class="tab-pane fade" id="clausulas" role="tabpanel">
                <div class="card mb-3">
                    <div id="compra_cupo_campos">
                            <div class="info-box mb-4">
                                <strong>Variables disponibles para usar en las cl√°usulas:</strong><br>
                                Para Primer pago usar: &#123;&#123;primer_pago|intcomma&#125;&#125;<br>
                                Para Primer pago en letras usar &#123;&#123;primer_pago_letras&#125;&#125;<br>
                                Para el dia del primer pago usar &#123;&#123;dia_primer_pago&#125;&#125;<br>
                                Para el dia del primer en letras pago usar &#123;&#123;dia_primer_pago_letras&#125;&#125;<br>
                                Para segundo pago usar: &#123;&#123;segundo_pago|intcomma&#125;&#125;<br>
                                Para segundo pago en letras usar &#123;&#123;segundo_pago_letras&#125;&#125;<br>
                                Para el dia del segundo pago usar &#123;&#123;dia_segundo_pago&#125;&#125;<br>
                                Para el dia del segundo en letras pago usar &#123;&#123;dia_segundo_pago_letras&#125;&#125;<br>
                                Para tercer pago usar: &#123;&#123;tercer_pago|intcomma&#125;&#125;<br>
                                Para tercer pago en letras usar &#123;&#123;tercer_pago_letras&#125;&#125;<br>
                                Para el dia del tercer pago usar &#123;&#123;dia_tercer_pago&#125;&#125;<br>
                                Para el dia del tercer en letras pago usar &#123;&#123;dia_tercer_pago_letras&#125;&#125;
                            </div>
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>Formas de Pago (Cl√°usula 3)</span>
                        <button type="button" id="add_tercera" class="btn btn-sm btn-secondary">+ Agregar</button>
                    </div>
                    <div class="card-body">
                        <div id="clausula3">
                            <ul class="claus-list-3">
                                <!-- Se llenar√°n din√°micamente -->
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="card mb-3">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>Cl√°usulas del Contrato</span>
                        <button type="button" id="add_clausula" class="btn btn-sm btn-secondary">+ Agregar</button>
                    </div>
                    <div class="card-body">
                        <div id="checkboxes">
                            <ul class="claus-list">
                                <!-- Se llenar√°n din√°micamente -->
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>Observaciones</span>
                        <button type="button" id="add_opcion" class="btn btn-sm btn-secondary">+ Agregar</button>
                    </div>
                    <div class="card-body">
                        <div id="opciones">
                            <ul class="claus-list">
                                <!-- Se llenar√°n din√°micamente -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- BOT√ìN SUBMIT -->
        <div class="text-center mt-4 mb-5">
            <button type="submit" class="btn btn-primary btn-lg">
                üìÑ Generar Contrato PDF
            </button>
        </div>
    </form>
</div>

<script>
    console.log('üîß Script iniciado');
    // OBJETOS DE DATOS
    const clausulasPorContrato = {
        "permuta": [
            { texto: "La retenci√≥n en la fuente y el traspaso del veh√≠culo de placas _______ la asume EL PRIMER PERMUTANTE." },
            { texto: "La chatarizaci√≥n y cancelaci√≥n de matr√≠cula del veh√≠culo de placas _____ ser√° asumida por EL SEGUNDO PERMUTANTE." },
            { texto: "La retenci√≥n en la fuente y el traspaso del veh√≠culo de placas ______ la asume EL SEGUNDO PERMUTANTE." },
            { texto: "EL PRIMER PERMUTANTE cancelar√° los gastos ocasionados por pasar el veh√≠culo por sidenal sin funcionar por valor de xxxxxx xxxx MIL PESOS M/CTE($xxx.xxx)." }
        ],
        "venta": [
            { "texto": "El comprador se compromete a cancelar el valor acordado en los t√©rminos y plazos estipulados en la cl√°usula tercera." },
            { "texto": "A estar a paz y salvo por todo concepto, comparendos y/o multas de tr√°nsito a nivel nacional y estar inscrito ante el RUNT (Registro √∫nico nacional de tr√°nsito)." },
            { "texto": "Por mutuo acuerdo entre las partes, el veh√≠culo nuevo ser√° afiliado a la empresa OPERADORA DE TRANSPORTE DE COLOMBIA TAXI CUPOS S.A.S." }
        ],
        "Compra_Cupo": [
            { texto: "Los gastos de traspaso ser√°n asumidos 50% por el comprador y 50% por el vendedor." },
            { texto: "La chatarizaci√≥n y derechos de cancelaci√≥n de matr√≠cula ser√°n asumidos en su totalidad por el comprador." },
            { texto: "La retenci√≥n en la fuente ser√° asumida por el vendedor en su totalidad." }
        ],
        "compra_Particular": [
            { texto: "La retenci√≥n en la fuente ser√° asumida por el vendedor en su totalidad." },
            { texto: "Derechos de traspaso ante el VENTANILLA UNICA DE SERVICIOS 'VUS', ser√° asumida 50% por cada una de las partes." }
        ],
        "compra_usado": [
            { texto: "Los gastos de traspaso ser√°n asumidos 50% por el comprador y 50% por el vendedor." },
            { texto: "La retenci√≥n en la fuente ser√° asumida por el vendedor en su totalidad." },
            { texto: "CLAUSULA EXTRA" }
        ],
        "venta_particular": [
            { texto: "La retenci√≥n en la fuente ser√° asumida por el vendedor en su totalidad." },
            { texto: "Derechos de traspaso ante el VENTANILLA UNICA DE SERVICIOS 'VUS', ser√° asumida 50% por cada una de las partes." }
        ],
        "venta_usado": [
            { texto: "Los gastos de traspaso ser√°n asumidos 50% por el comprador y 50% por el vendedor." },
            { texto: "La retenci√≥n en la fuente ser√° asumida por el vendedor en su totalidad." },
            { texto: "CLAUSULA EXTRA" }
        ],
        "chatarizacion_con_venta": [],
        "servicio_chatarrizacion": [],
        "venta_cupo": [
            { texto: "El Cesionario se compromete a cancelar el valor acordado en los t√©rminos y plazos estipulados en la cl√°usula tercera." },
            { texto: "El Cesionario deber√° estar a paz y salvo por todo concepto, comparendos y / o multas de tr√°nsito a nivel nacional y estar inscrito ante el RUNT (Registro √önico Nacional de Tr√°nsito). -----------------------------------------------------------------------" },
            { texto: "A entregar la factura de compra con improntas, declaraci√≥n y manifiesto de aduana expedida por el concesionario autorizado, prendas si es el caso para matr√≠cula del veh√≠culo nuevo, y se compromete a cumplir con los requisitos estipulados en la presente cl√°usula. -------------------------------------------------------------------------------------------------------------" }
        ]
    };

    const opcionesPorContrato = {
        "permuta": [
            { texto: "Se aclara que los veh√≠culos son dos taxis del cual los PERMUTANTES ceden todos los derechos de reposici√≥n del cupo y del taxi." },
            { texto: "LOS PERMUTANTES entregar√°n los veh√≠culos en menci√≥n a paz y salvo por todo concepto." },
            { texto: "EL SEGUNDO PERMUTANTE solicitar√° los paz y salvos de movilidad, de accidentes y comparendos administrativos." },
            { texto: "El taxi nuevo se entregar√° con emblemas reglamentarios, derechos de matr√≠cula cancelados ante el SIM, soat por un a√±o, un a√±o de rodamiento cancelado ante la empresa Taxi Cupos a partir de la entrega del veh√≠culo, impuesto a√±o en curso, la tarjeta de operaci√≥n y los seguros contractual y extracontractual se entregar√°n cancelados hasta la fecha de corte de la empresa afiliadora." },
            { texto: "El cambio de veh√≠culos se realizar√° al tener los documentos firmados y autenticados junto con revisi√≥n DIJIN del veh√≠culo." }
        ],
        "Compra_Cupo": [
            { texto: "Se aclara que el veh√≠culo es un taxi del cual el vendedor cede al comprador todos los derechos de reposici√≥n del cupo y del taxi." },
            { texto: "El veh√≠culo se entregar√° por parte del vendedor al comprador a paz y salvo por todo concepto respecto al carro y al cupo." },
            { texto: "El comprador se hace responsable respecto a comparendos, multas, infracciones, accidentes de tr√°nsito o cualquier otro inconveniente que se lleguea presentar con el taxi y su cupo despu√©s de realizada la entrega del veh√≠culo." },
            { texto: "El vendedor se compromete a asistir a cualquier llamado por parte de cualquier entidad competente respecto al taxi y su cupo." },
            { texto: "El veh√≠culo ser√° traspasado a nombre del comprador o a quien este designe." },
            { texto: "El vendedor se compromete a completar la documentaci√≥n y requisitos solicitados para realizar el primer pago de este contrato en un tiempo m√°ximo de cinco (5) d√≠as h√°biles siguientes a la firma de este contrato." }
        ],
        "compra_Particular": [
            { texto: "Se aclara que el veh√≠culo es un ________________ del cual el vendedor cede al comprador todos los derechos." },
            { texto: "El veh√≠culo se entregar√° por parte del vendedor al comprador a paz y salvo por todo concepto respecto al carro." },
            { texto: "El veh√≠culo se entregar√° al comprador en el mismo estado visto, funcionando y a entera satisfacci√≥n por parte del vendedor al comprador y no tiene garant√≠a por ser un veh√≠culo usado." }
        ],
        "compra_usado": [
            { texto: "Se aclara que el veh√≠culo es un taxi del cual el vendedor cede al comprador todos los derechos de reposici√≥n del cupo y del taxi." },
            { texto: "El veh√≠culo se entregar√° por parte del vendedor al comprador a paz y salvo por todo concepto respecto al carro y al cupo." },
            { texto: "El comprador se hace responsable respecto a comparendos, multas, infracciones, accidentes de tr√°nsito o cualquier otro inconveniente que se lleguea presentar con el taxi y su cupo despu√©s de realizada la entrega del veh√≠culo." },
            { texto: "El vendedor se compromete a asistir a cualquier llamado por parte de cualquier entidad competente respecto al taxi y su cupo." },
            { texto: "El veh√≠culo ser√° traspasado a nombre del comprador o a quien este designe." },
            { texto: "El vendedor se compromete a completar la documentaci√≥n y requisitos solicitados para realizar el primer pago de este contrato en un tiempo m√°ximo de cinco (5) d√≠as h√°biles siguientes a la firma de este contrato." }
        ],
        "venta_particular": [
            { texto: "Se aclara que el veh√≠culo es un ________________ del cual el vendedor cede al comprador todos los derechos." },
            { texto: "El veh√≠culo se entregar√° por parte del vendedor al comprador a paz y salvo por todo concepto respecto al carro." },
            { texto: "El veh√≠culo se entregar√° al comprador en el mismo estado visto, funcionando y a entera satisfacci√≥n por parte del vendedor al comprador y no tiene garant√≠a por ser un veh√≠culo usado." },
            { texto: "El veh√≠culo ser√° entregado al estar cancelado en su totalidad." }
        ],
        "venta_usado": [
            { texto: "Se aclara que el veh√≠culo es un taxi del cual el vendedor cede al comprador todos los derechos de reposici√≥n del cupo y del taxi." },
            { texto: "El veh√≠culo se entregar√° por parte del vendedor al comprador a paz y salvo por todo concepto respecto al carro y al cupo." },
            { texto: "El comprador se hace responsable respecto a comparendos, multas, infracciones, accidentes de tr√°nsito o cualquier otro inconveniente que se lleguea presentar con el taxi y su cupo despu√©s de realizada la entrega del veh√≠culo." },
            { texto: "El veh√≠culo se entregar√° al comprador en el mismo estado visto, funcionando y a entera satisfacci√≥n sin garant√≠a por parte del vendedor al comprador, esto por ser un veh√≠culo usado." },
            { texto: "El veh√≠culo ser√° entregado al estar cancelado en su totalidad." }
        ],
        "chatarizacion_con_venta": [
            { texto: "Se aclara que el veh√≠culo debe ser entregado funcionando, en el mismo estado visto y los gastos que se ocasionen fuera de lo estipulado en el contrato ser√°n asumidos por el propietario, como comparendos, y lo que se requiera para solicitud de la paz y salvo de la empresa afiliadora ________________. Adem√°s, ser√° afiliado a la empresa ---------------------------------------." },
            { texto: "El veh√≠culo ser√° entregado dentro de los tres d√≠as h√°biles siguientes al hacerse efectivo el pago total de este contrato. ----------------" },
            { texto: "Los seguros contra y extra junto con la tarjeta de operaci√≥n ser√°n asumidos por el PROPIETARIO. ------------------" },
            { texto: "Si el veh√≠culo queda afiliado a TAXICUPOS S.A.S., se entregar√° con factura cancelada ante TAXICUPOS por un a√±o de rodamiento. -------------------------------------------------------------------------------------------------------------------" }
        ],
        "servicio_chatarrizacion": [
            { texto: "Se aclara que el veh√≠culo debe ser entregado funcionando, en el mismo estado visto y los gastos que se ocasionen fuera de lo estipulado en el contrato ser√°n asumidos por el propietario, como comparendos, y lo que se requiera para solicitud de la paz y salvo de la empresa afiliadora ________________. Adem√°s, ser√° afiliado a la empresa --------------------------------------------------------------------------------------------------------------------------." },
            { texto: "Los seguros contra y extra junto con la tarjeta de operaci√≥n ser√°n asumidos por el PROPIETARIO. ------------------" },
            { texto: "Si el veh√≠culo queda afiliado a TAXICUPOS S.A.S., se entregar√° con factura cancelada ante TAXICUPOS por un a√±o de rodamiento. --------------------------------------------------------------------------------------------------------------------" },
            { texto: "Los documentos y placas del taxi nuevo ser√°n entregados dentro de los tres d√≠as h√°biles siguientes a salir la matr√≠cula y al hacerse efectivo el pago total de este contrato. ---------------------------------------------------------------" }
        ],
        "venta_cupo": [
            { "texto": "Cualquier gasto adicional no estipulado en este contrato ser√° asumido por el comprador. --------------------------------------" },
            { "texto": "El veh√≠culo ser√° entregado dentro de los tres d√≠as h√°biles siguientes al hacerse efectivo el pago total de este contrato." },
            { "texto": "El PROPIETARIO solicitar√° la excepci√≥n del IVA (CREI) en la factura del veh√≠culo objeto de este contrato con la asesor√≠a y acompa√±amiento del TRAMITADOR. -------------------------------------------------------------------------------------------" },
            { "texto": "Si el comprador solicita la instalaci√≥n del equipo de gas, el costo ser√° asumido por este ante la empresa instaladora. El Vendedor se compromete a gestionar este tr√°mite ante el SIM para que la tarjeta de propiedad salga gas - gasolina y cancelar√° los derechos ante tr√°nsito. --------------------------------------------------------------------------------------------------------" },
            { "texto": "El comprador se compromete a firmar los compromisos de consumo del veh√≠culo ante la entidad que realiz√≥ o realizar√° la transformaci√≥n a gas, bajo las condiciones que establezca la empresa transformadora y/o el convenio que estos presenten. --------------------------------------------------------------------------------------------------------------------------------------" },
            { "texto": "Al estar aprobado el CREI (Descuento del IVA) el valor eximido en la factura del taxi nuevo ya est√° descontado del valor total de este contrato. -------------------------------------------------------------------------------------------------------------------" },
            { "texto": "El vendedor y el comprador han pactado que el tiempo de demora, dilaci√≥n, atraso, subsanaci√≥n, negligencia, impericia, fuerza mayor o caso fortuito, atribuible a la autoridad administrativa, judicial y/o de tr√°nsito no ser√° responsabilidad atribuible a Taxi Cupos SAS. ---------------------------------------------------------------------------------------------------------------------" }
        ]
    };

    const tercera_clausula = {
        "permuta": [
            { texto: "El comprador se compromete a cancelar la suma de {{ primer_pago_letras }} (${{ primer_pago }}), posteriores a los {{ dia_primer_pago_letras }} ({{ dia_primer_pago }}) d√≠as h√°biles siguientes a..." },
            { texto: "El comprador se compromete a cancelar la suma de {{ segundo_pago_letras }} (${{ segundo_pago }}), posteriores a los {{ dia_segundo_pago_letras }} ({{ dia_segundo_pago }}) d√≠as h√°biles siguientes a..." }
        ],
        "venta": [
            { texto: "El comprador se compromete a cancelar la suma de {{ primer_pago_letras }} (${{ primer_pago }}), posteriores a los {{ dia_primer_pago_letras }} ({{ dia_primer_pago }}) d√≠as h√°biles siguientes a..." },
            { texto: "El comprador se compromete a cancelar la suma de {{ segundo_pago_letras }} (${{ segundo_pago }}), posteriores a los {{ dia_segundo_pago_letras }} ({{ dia_segundo_pago }}) d√≠as h√°biles siguientes a..." }
        ],
        "Compra_Cupo": [
            { texto: "El comprador se compromete a cancelar la suma de {{ primer_pago_letras }} (${{ primer_pago }}), posteriores a los {{ dia_primer_pago_letras }} ({{ dia_primer_pago }}) d√≠as h√°biles siguientes a realizar la entrega del veh√≠culo con sus respectivos documentos originales, al tener el resultado f√≠sico de la DIJIN, certificado de tradici√≥n sin pendientes, paz y salvo de traspaso de la empresa afiliadora, junto con los documentos firmados y autenticados para realizar los tr√°mites de traspaso a nombre del comprador o quien este designe. ----------------------" },
            { texto: "El comprador se compromete a cancelar la suma de {{ segundo_pago_letras }} (${{ segundo_pago }}), posteriores a los {{ dia_segundo_pago_letras }} ({{ dia_segundo_pago }}) d√≠as h√°biles siguientes a la expedici√≥n de paz y salvos de movilidad del veh√≠culo y los derechos de reposici√≥n, sin ning√∫n pendiente respecto a (COMPARENDOS, ADMINISTRATIVOS, ACCIDENTES DE TRANSITO Y COBROS COACTIVOS). Junto con la tarjeta de propiedad a nombre del comprador o quien este designe aprobada ante la VENTANILLA UNICA DE SERVICIOS 'VUS'. ----------------------------------------------" }
        ],
        "compra_Particular": [
            { texto: "El comprador se compromete a cancelar la suma de {{ primer_pago_letras }} (${{ primer_pago }}), posteriores a los {{ dia_primer_pago_letras }} ({{ dia_primer_pago }}) d√≠as h√°biles siguientes a..." },
            { texto: "El comprador se compromete a cancelar la suma de {{ segundo_pago_letras }} (${{ segundo_pago }}), posteriores a los {{ dia_segundo_pago_letras }} ({{ dia_segundo_pago }}) d√≠as h√°biles siguientes a..." }
        ],
        "compra_usado": [
            { texto: "El comprador se compromete a cancelar la suma de {{ primer_pago_letras }} (${{ primer_pago }}), posteriores a los {{ dia_primer_pago_letras }} ({{ dia_primer_pago }}) d√≠as h√°biles siguientes a realizar la entrega del veh√≠culo con sus respectivos documentos originales, al tener el resultado f√≠sico de la DIJIN, certificado de tradici√≥n sin pendientes, paz y salvo de traspaso de la empresa afiliadora, junto con los documentos firmados y autenticados para realizar los tr√°mites de traspaso a nombre del comprador o quien este designe. ----------------------" },
            { texto: "El comprador se compromete a cancelar la suma de {{ segundo_pago_letras }} (${{ segundo_pago }}), posteriores a los {{ dia_segundo_pago_letras }} ({{ dia_segundo_pago }}) d√≠as h√°biles siguientes a la expedici√≥n de paz y salvos de movilidad del veh√≠culo y los derechos de reposici√≥n, sin ning√∫n pendiente respecto a (COMPARENDOS, ADMINISTRATIVOS, ACCIDENTES DE TRANSITO Y COBROS COACTIVOS). Junto con la tarjeta de propiedad a nombre del comprador o quien este designe aprobada ante la VENTANILLA UNICA DE SERVICIOS 'VUS'. ----------------------------------------------" }
        ],
        "venta_particular": [
            { texto: "El comprador se compromete a cancelar la suma de {{ primer_pago_letras }} (${{ primer_pago }}), posteriores a los {{ dia_primer_pago_letras }} ({{ dia_primer_pago }}) d√≠as h√°biles siguientes a..." },
            { texto: "El comprador se compromete a cancelar la suma de {{ segundo_pago_letras }} (${{ segundo_pago }}), posteriores a los {{ dia_segundo_pago_letras }} ({{ dia_segundo_pago }}) d√≠as h√°biles siguientes a..." }
        ],
        "venta_usado": [
            { texto: "El comprador se compromete a cancelar la suma de {{ primer_pago_letras }} (${{ primer_pago }}), posteriores a los {{ dia_primer_pago_letras }} ({{ dia_primer_pago }}) d√≠as h√°biles siguientes a..." },
            { texto: "El comprador se compromete a cancelar la suma de {{ segundo_pago_letras }} (${{ segundo_pago }}), posteriores a los {{ dia_segundo_pago_letras }} ({{ dia_segundo_pago }}) d√≠as h√°biles siguientes a..." }
        ],
        "chatarizacion_con_venta": [
            { texto: "El propietario se compromete a cancelar la suma de <strong> {{ primer_pago_letras }} DE PESOS M/CTE (${{ primer_pago }})</strong> dentro de los {{ dia_primer_pago_letras }} ({{ dia_primer_pago }}) d√≠as h√°biles siguientes a‚Ä¶---------------------" },
            { texto: "El propietario se compromete a cancelar la suma de <strong> {{ segundo_pago_letras }} DE PESOS M/CTE (${{ segundo_pago }})</strong> dentro de los {{ dia_segundo_pago_letras }} ({{ dia_segundo_pago }}) d√≠as h√°biles siguientes a‚Ä¶---------------------" }
        ],
        "servicio_chatarrizacion": [
            { texto: "El propietario se compromete a cancelar la suma de <strong> {{ primer_pago_letras }} DE PESOS M/CTE (${{ primer_pago }})</strong> dentro de los {{ dia_primer_pago_letras }} ({{ dia_primer_pago }}) d√≠as h√°biles siguientes a‚Ä¶---------------------" },
            { texto: "El propietario se compromete a cancelar la suma de <strong> {{ segundo_pago_letras }} DE PESOS M/CTE (${{ segundo_pago }})</strong> dentro de los {{ dia_segundo_pago_letras }} ({{ dia_segundo_pago }}) d√≠as h√°biles siguientes a‚Ä¶---------------------" }
        ],
        "venta_cupo": [
            { texto: "El CESIONARIO se compromete a cancelar la suma de <strong>{{ primer_pago_letras }} DE PESOS M/CTE</strong><strong>(${{ primer_pago }}),</strong> posteriores a los {{ dia_primer_pago_letras }} ({{ dia_primer_pago }}) d√≠as h√°biles siguientes a..." },
            { texto: "El CESIONARIO se compromete a cancelar la suma de <strong>{{ segundo_pago_letras }} DE PESOS M/CTE</strong><strong>(${{ segundo_pago }}),</strong> posteriores a los {{ dia_segundo_pago_letras }} ({{ dia_segundo_pago }}) d√≠as h√°biles siguientes a..." },
            { texto: "El CESIONARIO se compromete a cancelar la suma de <strong>____________ DE PESOS M/CTE</strong><strong>( $___.000.000),</strong> posteriores a los______ (___) d√≠as h√°biles siguientes a..." }
        ]
    };

    // FUNCI√ìN AUXILIAR
    function crearElementoClausula(tipo, index, texto) {
        const li = document.createElement('li');
        li.classList.add('clausula-item');
        
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.name = `${tipo}_${index + 1}`;
        checkbox.id = `${tipo}_${index + 1}`;
        
        const inputText = document.createElement('input');
        inputText.type = 'text';
        inputText.name = `${tipo}_${index + 1}_text`;
        inputText.id = `${tipo}_${index + 1}_text`;
        inputText.value = texto;
        inputText.disabled = true;
        inputText.classList.add('form-control');
        
        li.appendChild(checkbox);
        li.appendChild(inputText);
        
        checkbox.addEventListener('change', function () {
            inputText.disabled = !checkbox.checked;
        });
        
        return li;
    }

    // TODO DENTRO DE DOMContentLoaded
    document.addEventListener('DOMContentLoaded', function () {
        
        // CAMBIO DE TIPO DE CONTRATO
        document.getElementById('tipo_contrato').addEventListener('change', function () {
            const tipoContrato = this.value;
            const checkboxesContainer = document.getElementById('checkboxes').querySelector('ul');
            const opcionesContainer = document.getElementById('opciones').querySelector('ul');
            const terceraContainer = document.getElementById('clausula3').querySelector('ul');
            const compraCupoCampos = document.getElementById('compra_cupo_campos');
            const vehiculo2Container = document.getElementById('vehiculo2-container');
            const tipo_pagoContainer = document.getElementById('tipo_venta_usado-container');
            const tipo_clausula = document.getElementById('venta_nuevo_container');
            const serv_container = document.getElementById('serv_chatarrizacion');
            const camposPermutaAdicionales = document.getElementById('campos_adicionales_permuta');
            const tiposOcultos = ['diaco', 'compra_venta', 'cmatricula', 'mandato', 'fun', 'metrokia', 'autoland', 'soat'];
            
            checkboxesContainer.innerHTML = '';
            opcionesContainer.innerHTML = '';
            terceraContainer.innerHTML = '';

            camposPermutaAdicionales.style.display = tipoContrato === 'permuta' ? 'block' : 'none';

            if (tipoContrato) {
                if (!clausulasPorContrato[tipoContrato]) clausulasPorContrato[tipoContrato] = [];
                if (!opcionesPorContrato[tipoContrato]) opcionesPorContrato[tipoContrato] = [];
                if (!tercera_clausula[tipoContrato]) tercera_clausula[tipoContrato] = [];

                clausulasPorContrato[tipoContrato].forEach((clausula, index) => {
                    checkboxesContainer.appendChild(crearElementoClausula('gasto', index, clausula.texto));
                });

                opcionesPorContrato[tipoContrato].forEach((opcion, index) => {
                    opcionesContainer.appendChild(crearElementoClausula('opcion', index, opcion.texto));
                });

                tercera_clausula[tipoContrato].forEach((tercera, index) => {
                    terceraContainer.appendChild(crearElementoClausula('tercera', index, tercera.texto));
                });
            }

            compraCupoCampos.style.display = tiposOcultos.includes(tipoContrato) ? 'none' : 'block';
            vehiculo2Container.style.display = tipoContrato === 'permuta' ? 'block' : 'none';
            tipo_pagoContainer.style.display = tipoContrato === 'venta_usado' ? 'block' : 'none';
            tipo_clausula.style.display = tipoContrato === 'venta' ? 'block' : 'none';
            serv_container.style.display = tipoContrato === 'chatarizacion_con_venta' ? 'block' : 'none';
        });

        // AGREGAR CL√ÅUSULA
        document.getElementById('add_clausula').addEventListener('click', function () {
            const tipoContrato = document.getElementById('tipo_contrato').value;
            if (!tipoContrato) {
                alert('‚ö†Ô∏è Por favor, seleccione primero un tipo de contrato');
                return;
            }
            if (!clausulasPorContrato[tipoContrato]) clausulasPorContrato[tipoContrato] = [];
            const checkboxesContainer = document.getElementById('checkboxes').querySelector('ul');
            const clausulaIndex = clausulasPorContrato[tipoContrato].length;
            const nuevaClausula = { texto: "Nueva cl√°usula din√°mica" };
            checkboxesContainer.appendChild(crearElementoClausula('gasto', clausulaIndex, nuevaClausula.texto));
            clausulasPorContrato[tipoContrato].push(nuevaClausula);
        });

        // AGREGAR OPCI√ìN
        document.getElementById('add_opcion').addEventListener('click', function () {
            const tipoContrato = document.getElementById('tipo_contrato').value;
            if (!tipoContrato) {
                alert('‚ö†Ô∏è Por favor, seleccione primero un tipo de contrato');
                return;
            }
            if (!opcionesPorContrato[tipoContrato]) opcionesPorContrato[tipoContrato] = [];
            const opcionesContainer = document.getElementById('opciones').querySelector('ul');
            const opcionIndex = opcionesPorContrato[tipoContrato].length;
            const nuevaOpcion = { texto: "Nueva observaci√≥n din√°mica" };
            opcionesContainer.appendChild(crearElementoClausula('opcion', opcionIndex, nuevaOpcion.texto));
            opcionesPorContrato[tipoContrato].push(nuevaOpcion);
        });

        // AGREGAR TERCERA
        document.getElementById('add_tercera').addEventListener('click', function () {
            const tipoContrato = document.getElementById('tipo_contrato').value;
            if (!tipoContrato) {
                alert('‚ö†Ô∏è Por favor, seleccione primero un tipo de contrato');
                return;
            }
            if (!tercera_clausula[tipoContrato]) tercera_clausula[tipoContrato] = [];
            const terceraContainer = document.getElementById('clausula3').querySelector('ul');
            const terceraIndex = tercera_clausula[tipoContrato].length;
            const nuevaTercera = { texto: "Nueva forma de pago din√°mica" };
            terceraContainer.appendChild(crearElementoClausula('tercera', terceraIndex, nuevaTercera.texto));
            tercera_clausula[tipoContrato].push(nuevaTercera);
        });

        // GESTI√ìN PERSONAS
        const personaSelect = document.getElementById('persona');
        const vendedoresSection = document.getElementById('vendedores_section');
        const compradoresSection = document.getElementById('compradores_section');
        const tipoPersonaJuridica = document.getElementById('tipo_persona_juridica');
        const tipoJuridicaSelect = document.getElementById('tipo_juridica');
        const camposJuridica = document.getElementById('campos_juridica');

        personaSelect.addEventListener('change', function () {
            if (this.value === 'Juridica') {
                vendedoresSection.style.display = 'none';
                compradoresSection.style.display = 'none';
                tipoPersonaJuridica.style.display = 'block';
            } else {
                vendedoresSection.style.display = 'block';
                compradoresSection.style.display = 'block';
                tipoPersonaJuridica.style.display = 'none';
                camposJuridica.style.display = 'none';
                tipoJuridicaSelect.value = '';
            }
        });

        tipoJuridicaSelect.addEventListener('change', function () {
            camposJuridica.style.display = (this.value === 'Comprador' || this.value === 'Vendedor') ? 'block' : 'none';
        });

        const vendedoresSelect = document.getElementById('vendedores');
        const cedulaVendedor2 = document.getElementById('cedula_vendedor_2');
        const compradoresSelect = document.getElementById('compradores');
        const cedulaComprador2 = document.getElementById('cedula_comprador_2');

        vendedoresSelect.addEventListener('change', function () {
            cedulaVendedor2.style.display = this.value === '2' ? 'block' : 'none';
            compradoresSelect.disabled = this.value !== '';
        });

        compradoresSelect.addEventListener('change', function () {
            cedulaComprador2.style.display = this.value === '2' ? 'block' : 'none';
            vendedoresSelect.disabled = this.value !== '';
        });
    });
</script>

{% endblock %}